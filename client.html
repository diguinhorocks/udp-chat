<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Node.chat</title>
    <script src="/socket.io/socket.io.js"></script>
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

    <script>
        var socket = io.connect('http://127.0.0.1:8080');

        socket.on('connect', function(){
          var username = prompt('Insira seu nickname');

          socket.emit('sendusername', username);
        })

        socket.on('receive', function(data, username){
          $('.text').append('<p>'+ username +': '+ data +'</p>');
        })

        socket.on('userlist', function(list){
          $('.users').empty();

          $.each(list, function(i, user){
            $('.users').append('<a href="#">' + user + '</a>');
          })
        })

    </script>

    <script type="text/javascript">
      $(document).ready(function(){
        $('#send').click(function(){
          socket.emit('send', $('#msg').val());
        });
      });
    </script>
</head>

<body>
  <input type="text" id="msg" />

  <button type="submit" id="send">Send</button>

  <div class="users"></div>

  <div class="text"></div>
</body>

</html>