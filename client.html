<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Node.chat</title>

    <style type="text/css">
      body {
        font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
      }

      h1 {
        font-size: 40px;
        color: rgba(0, 0, 0, .8);
      }
    </style>

    <script src="/socket.io/socket.io.js"></script>
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

    <script>
        var socket = io.connect('http://127.0.0.1:8080');

        socket.on('connect', function(){
          var username = prompt('Insira seu nickname');

          socket.emit('sendusername', username);
        })

        socket.on('receive', function(data, username){
          $('.text').append('<p>'+ username +': '+ data +'</p>');
        })

        socket.on('userlist', function(list){
          $('.users').empty();

          $.each(list, function(i, user){
            $('.users').append('<a href="#">' + user + '</a>');
          })
        })

    </script>

    <script type="text/javascript">
      $(document).ready(function(){
        $('#send').click(function(){
          socket.emit('send', $('#msg').val());
        });
      });
    </script>
</head>

<body>
  <h1>Chat.node</h1>

  <div class="users"></div>

  <div class="text"></div>

  <input type="text" id="msg" />

  <button type="submit" id="send">Enviar</button>
</body>

</html>